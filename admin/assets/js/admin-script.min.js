"use strict";function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(e){var t=function(){function t(){_classCallCheck(this,t),this.name="HayyaBuild",this.description="HayyaBuild allows you to build unlimited headers,",this.version="5.0",this.grid=!1,this._initializer()}return _createClass(t,[{key:"domContentLoaded",value:function(){var e=this,t=!1,n=setInterval(function(){var o=document.querySelector(".edit-post-visual-editor.editor-styles-wrapper");o&&(e.editorBackground(o),t=!0),t&&clearInterval(n)},1e3);document.addEventListener("DOMContentLoaded",function(){e.material(),e.CSSEditor(document.getElementById("code_editor_page_css"))})}},{key:"CSSEditor",value:function(e){if(e){var t=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};t.codemirror=_.extend({},t.codemirror,{tabSize:2,mode:"css"});var n=wp.codeEditor.initialize(e,t);"function"==typeof n.codemirror.on&&n.codemirror.on("change",function(t){e.value=t.getValue()})}}},{key:"material",value:function(){var e=document.querySelectorAll('.file-field input[type="file"]');e&&e.forEach(function(t){t.addEventListener("change",function(n){var o=t.parentNode.parentNode.querySelector("input.file-path");o&&e[0]&&e[0].files[0]&&e[0].files[0].name&&(o.value=e[0].files[0].name)})});var t=document.querySelectorAll(".hayyabuild-collapsible");t&&t.forEach(function(e){var t=e.querySelectorAll("li");t&&t.forEach(function(e){e.addEventListener("click",function(n){n.target.classList&&n.target.classList.contains("collapsible-header")&&(t.forEach(function(t){e!==t&&t.classList.remove("active")}),e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active"))})})})}},{key:"gridList",value:function(e){var t=this;e&&"object"===_typeof(e)&&e.forEach(function(n){var o="100%";n.addEventListener("click",function(r){r.preventDefault(),e.forEach(function(e){e.parentNode.classList.remove("active")}),n.parentNode.classList.add("active");var a=n.getAttribute("data-view"),i=document.querySelectorAll(".element-list");i&&"object"===_typeof(i)&&(o="list"===a?"100%":"calc(50% - 0px)",t.grid="grid"===a,i.forEach(function(e,t){setTimeout(function(){e.style.width=o,e.classList.remove("hayya_grid")},50+50*t)}))})})}},{key:"itemsFiltration",value:function(t){var n=this;t&&"object"===_typeof(t)&&t.forEach(function(o){var r="";o.addEventListener("click",function(a){a.preventDefault(),t.forEach(function(e){e.parentNode.classList.remove("active")}),o.parentNode.classList.add("active");var i=0,l=0;if(r=o.getAttribute("data-filter"),(n.grid||e(".hayya_template").length>0)&&(i=l=1),"all"!==r){var c=document.querySelector(".filter_empty_"+r);c?(e(".empty-filter").slideUp(i),e(c).slideDown(i)):e(".empty-filter").slideUp(i)}else e(".empty-filter").length>0&&e(".empty-filter").slideUp(i);var u=1;e(e(".hayya_filter_items").get().reverse()).each(function(t,n){"all"===r||e(n).hasClass("filter_"+r)?e(n).hasClass("hayya_is_hidden")&&(setTimeout(function(){e(n).slideDown(i).removeClass("hayya_is_hidden")},u*l),u++):e(n).hasClass("hayya_is_hidden")||(setTimeout(function(){e(n).slideUp(i).addClass("hayya_is_hidden")},u*l),u++)})}),""===r&&e(".empty-filter").slideUp(1)})}},{key:"copyShortcode",value:function(e){e&&"object"===_typeof(e)&&e.forEach(function(e){e.addEventListener("click",function(t){e.textContent;window.prompt("Copy to clipboard: Ctrl+C, Enter",e.textContent)})})}},{key:"editorBackground",value:function(e){var t=document.querySelectorAll(".background_div"),n=document.getElementById("background_type_input"),o=document.querySelector("#hayyabuild_color_settings_container");if(o&&e&&t.length&&n){var r=document.getElementById("background_image_input"),a=document.getElementById("background_repeat_input"),i=document.getElementById("background_size_input"),l=document.getElementById("hayyabuild_text_color"),c=document.getElementById("hayyabuild_background_color"),u=document.getElementById("hayyabuild_border_color"),d=function(){var o=n.value,l=document.getElementById(o),u=c.value||"",d=r.value||"",s=a.value||"",f=i.value||"",y="";("background_image"===o||"background_video"===o&&d)&&(y='url("'+d+'")'),"background_color"===o&&(y=u),t.forEach(function(e){e.style.display="none"}),l&&(l.style.display="block"),e.style.background=y,s&&(e.style.backgroundRepeat=s),f&&(e.style.backgroundSize=f)};d(),n.addEventListener("change",d),r&&r.addEventListener("change",d),a&&a.addEventListener("change",d),i&&i.addEventListener("change",d);var s=function(t){_inherits(r,React.Component);var o=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=o.apply(this,arguments)).state={text:l.value||"",backgroundG:c.value||"",borderG:u.value||"",background:"",border:"",open:!1},-1===t.state.backgroundG.indexOf("gradient")&&(t.state.background=t.state.backgroundG,t.state.backgroundG=""),-1===t.state.borderG.indexOf("gradient")&&(t.state.border=t.state.borderG,t.state.borderG=""),t.updateInputs=t.updateInputs.bind(_assertThisInitialized(t)),t.onchangeText=t.onchangeText.bind(_assertThisInitialized(t)),t.onchangeBackground=t.onchangeBackground.bind(_assertThisInitialized(t)),t.onchangeBorder=t.onchangeBorder.bind(_assertThisInitialized(t)),t}return _createClass(r,[{key:"componentDidMount",value:function(){this.updateInputs()}},{key:"componentDidUpdate",value:function(){this.updateInputs()}},{key:"updateInputs",value:function(){this.state.open=!0,l.value=this.state.text,c.value=this.state.background||this.state.backgroundG,u.value=this.state.border||this.state.borderG,l.value?e.style.color=l.value:e.style.color="","background_color"===n.value&&(e.style.background=c.value||""),""===u.value?(e.style.borderColor="",e.style.borderImageSource="",e.style.borderImageSlice=""):u.value.indexOf("gradient")>-1?(e.style.borderImageSource=u.value,e.style.borderImageSlice="1",e.style.borderColor=""):(e.style.borderImageSource="",e.style.borderImageSlice="",e.style.borderColor=u.value)}},{key:"onchangeText",value:function(e){this.setState({text:e||""})}},{key:"onchangeBackground",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&this.setState({backgroundG:e||""}),!t&&this.setState({background:e||""})}},{key:"onchangeBorder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&this.setState({borderG:e||""}),!t&&this.setState({border:e||""})}},{key:"render",value:function(){var e=this,t=wp,n=t.i18n.__,o=t.blockEditor,r=o.PanelColorSettings,a=o.__experimentalPanelColorGradientSettings,i=this.state,l=i.text,c=i.background,u=i.backgroundG,d=i.border,s=i.borderG,f=i.open;return React.createElement(function(){return"function"==typeof a?React.createElement(a,{title:n("Color Settings","hayyabuild"),initialOpen:f,settings:[{label:n("Text Color","hayyabuild"),colorValue:l,onColorChange:function(t){return e.onchangeText(t)}},{label:n("Background Color","hayyabuild"),colorValue:c,gradientValue:u,onColorChange:function(t){return e.onchangeBackground(t)},onGradientChange:function(t){return e.onchangeBackground(t,!0)}},{label:n("Border Color","hayyabuild"),colorValue:d,gradientValue:s,onColorChange:function(t){return e.onchangeBorder(t)},onGradientChange:function(t){return e.onchangeBorder(t,!0)}}]}):React.createElement(r,{title:n("Color Settings","hayyabuild"),initialOpen:f,colorSettings:[{label:n("Text Color","hayyabuild"),value:l,onChange:function(t){return e.onchangeText(t)}},{label:n("Background Color","hayyabuild"),value:c,onChange:function(t){return e.onchangeBackground(t)}},{label:n("Border Color","hayyabuild"),value:d,onChange:function(t){return e.onchangeBorder(t)}}]})})}}]),r}();ReactDOM.render(React.createElement(s),o);var f=function(t,n){var o=parseInt(t.value);(o||0===o)&&(e.style["border".concat(n,"Width")]="".concat(o,"px"))},y=document.querySelectorAll(".border_color_setting");y&&Array.prototype.forEach.call(y,function(e){var t=e.dataset.side;f(e,t),e.addEventListener("change",function(){return f(e,t)})})}}},{key:"chosenSelect",value:function(){e(".chosen-select").chosen({width:"100%",no_results_text:"Oops, nothing found!"}),e(".chosen-select").bind("load, change",function(t,n){var o=e(this);""===e(this).val()||null===e(this).val()?o.children().each(function(){e(this).prop("disabled",!1)}):n.selected&&"all"===n.selected&&(e(this).val("all"),o.children().not(":selected").each(function(){e(this).prop("disabled",!0)})),e(".chosen-select").trigger("chosen:updated")})}},{key:"imageUploader",value:function(){var e,t=document.getElementById("background_image_button");t&&"object"===_typeof(t)&&t.addEventListener("click",function(t){t.preventDefault(),e?e.open():(e=wp.media.frames.file_frame=wp.media({title:"Choose Image",library:{type:"image"}}),e.on("select",function(t){var n=e.state().get("selection").first().toJSON();document.getElementById("background_image_input").value=n.url;var o=document.querySelector(".edit-post-visual-editor.editor-styles-wrapper");o&&(o.style.background='url("'+n.url+'")')}),e.open())})}},{key:"videoUploader",value:function(){var e,t=document.getElementById("background_video_button");t&&"object"===_typeof(t)&&t.addEventListener("click",function(t){t.preventDefault(),e?e.open():(e=wp.media.frames.file_frame=wp.media({title:"Choose Video",library:{type:"video"}}),e.on("select",function(t){var n=e.state().get("selection").first().toJSON();document.getElementById("background_video_input").value=n.url;var o=document.querySelector(".edit-post-visual-editor.editor-styles-wrapper");o&&(o.style.background="#FFF")}),e.open())})}},{key:"_initializer",value:function(){this.videoUploader(),this.imageUploader(),this.domContentLoaded(),this.gridList(document.querySelectorAll(".hayya_list_view")),this.itemsFiltration(document.querySelectorAll(".hayya_filter")),this.copyShortcode(document.querySelectorAll(".hayyabuild-copy-shortcode")),e(".chosen-select").length>0&&this.chosenSelect()}}]),t}();void 0===window.HayyaBuild&&(window.HayyaBuild={}),new t}(jQuery);